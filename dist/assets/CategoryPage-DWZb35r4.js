import{r as d,j as e}from"./client-BCr4-QWM.js";import{c as $,C as z}from"./clock-plcJn3eu.js";/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],I=$("trophy",H);function D({categoryNames:l=[],label:u="",focusColor:k="#4ade80",streakKey:m="",streakTitle:p="TOP FOCUS STREAK",streakBarColor:C="bg-purple-500",streakHoverColor:N="hover:bg-purple-400",streakGlowColor:E="rgba(168, 85, 247, 0.8)",summaryType:b="",quipDefault:g="Keep up the grind!"}){const[y,t]=d.useState(""),[M,W]=d.useState(!1),x=d.useRef("");d.useEffect(()=>{async function r(){if(!window.LanguageModel){t(g);return}if(await window.LanguageModel.availability()==="unavailable"){t(g);return}const a=await window.LanguageModel.create();chrome.storage.local.get(["tabWrapSummary"],async s=>{const o=s.tabWrapSummary||{};let n=null;for(const R of l)if(o.categorySummaries?.[R]!==void 0){n=R;break}const f=n?o.categorySummaries[n]:"";if(f){const R=f+`
Write a quippy statement about this ${b} summary, as if talking to the user, in less than 50 characters.`;try{W(!0);let U="";for await(const O of a.promptStreaming(R))U+=O,x.current=U,t(U);W(!1),a.destroy()}catch{t(g),W(!1)}}else t(g)})}r()},[]);const[i,w]=d.useState({totalSeconds:0,streakArr:[]});d.useEffect(()=>{chrome.storage.local.get(["tabWrapSummary"],r=>{const c=r.tabWrapSummary||{};let a=null;for(const n of l)if(c.categoryTotals?.[n]!==void 0){a=n;break}const s=a?c.categoryTotals[a]:0;let o=[];m&&Array.isArray(c[m])?o=c[m]:a&&Array.isArray(c.topCategoryStreaks?.[a])&&(o=c.topCategoryStreaks[a]),w({totalSeconds:s,streakArr:o})})},[]);const S=Array.isArray(i.streakArr)?i.streakArr.map(r=>r.seconds!==void 0?r.seconds:r.minutes!==void 0?r.minutes*60:0):[],L=Array.isArray(i.streakArr)?i.streakArr.map(r=>r.date?new Date(r.date).toLocaleString("en-US",{month:"short",day:"numeric"}):""):[],T=Array.isArray(i.streakArr)&&i.streakArr.length?`${new Date(i.streakArr[0].date).toLocaleString("en-US",{month:"short",day:"numeric"})} - ${new Date(i.streakArr[i.streakArr.length-1].date).toLocaleString("en-US",{month:"short",day:"numeric"})}`:"",[P,j]=d.useState(0);d.useEffect(()=>{let r,c=1200;function a(s){r||(r=s);const o=Math.min((s-r)/c,1);j(o),o<1?requestAnimationFrame(a):j(1)}return requestAnimationFrame(a),()=>j(0)},[i.totalSeconds,S.length,S.join(",")]);const h=Math.floor(P*i.totalSeconds);let v="HOURS",A=Math.floor(h/3600);return h<60?(v="SECONDS",A=h):h<3600&&(v="MINUTES",A=Math.floor(h/60)),{quippySummary:y,isStreaming:M,shownValue:A,unit:v,streakDays:S,streakDates:L,timePeriodLabel:T,progress:P}}function F({hours:l,unit:u,label:k,focusColor:m,iconColor:p="#4ade80"}){return e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 bg-white/5 rounded-2xl border border-white/10 shadow-xl w-full max-w-lg mx-auto",children:[e.jsx("div",{className:"text-white mb-4 p-2 rounded-full",style:{backgroundColor:p+"33"},children:e.jsx(z,{className:"w-8 h-8",style:{color:p}})}),e.jsx("p",{className:"text-6xl sm:text-7xl font-extrabold",style:{color:m},children:l}),e.jsx("p",{className:"text-sm sm:text-base font-semibold text-gray-400 uppercase tracking-widest mt-2",children:u}),e.jsx("p",{className:"text-2xl sm:text-3xl font-extrabold text-white mt-4 text-center",children:k})]})}function G({streakDays:l,timePeriodLabel:u,streakDates:k,progress:m,barColor:p="bg-purple-500",hoverColor:C="hover:bg-purple-400",glowColor:N="rgba(168, 85, 247, 0.8)",title:E="TOP FOCUS STREAK"}){const b=Math.max(...l,1),y=l.map(t=>b?t/b:0).map(t=>t*(typeof m=="number"?m:1));return e.jsxs("div",{className:"flex flex-col items-center w-full mt-10",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-6 uppercase tracking-wider",children:E}),e.jsxs("div",{className:"flex items-end space-x-2 w-full max-w-sm px-4",children:[y.map((t,M)=>e.jsx("div",{className:`flex-1 rounded-t-lg ${p} ${C} transition-all duration-300 cursor-pointer`,style:{height:`${t*100}px`,minHeight:"4px",boxShadow:`0 0 10px ${t>.8?N:"transparent"}`,transition:"height 0.3s cubic-bezier(0.4,0,0.2,1)"}},M)),e.jsx(I,{className:"w-8 h-8 text-yellow-400 ml-4 animate-pulse"})]}),e.jsx("p",{className:"text-sm text-gray-400 mt-4 font-semibold tracking-wide",children:u})]})}function q({categoryNames:l=[],label:u="",focusColor:k="#4ade80",streakTitle:m="TOP CATEGORY STREAK",streakBarColor:p="bg-purple-500",streakHoverColor:C="hover:bg-purple-400",streakGlowColor:N="rgba(168, 85, 247, 0.8)",summaryType:E="",quipDefault:b="Keep going!",pageTitle:g="CATEGORY SUMMARY",bgColors:y=["#a78bfa","#fbbf24","#38bdf8"]}){const[t,M]=d.useState([]);d.useEffect(()=>{chrome.storage.local.get(["tabWrapSummary"],a=>{const s=a.tabWrapSummary||{},o=Array.isArray(s.categoryPercents)?s.categoryPercents.slice(0,5):[];M(o.map(n=>n.cat))})},[l]);let W=l&&l.length?l[0]:u;const x=t.findIndex(a=>a===W),i=x>=0?(x+1)%t.length:0,w=t[i]||"";let S="";w.includes("/")?S=w.split("/")[0].replace(/\s+/g,"").toLowerCase():S=w.split(" ")[0].toLowerCase();const L=`${S}.html`,{quippySummary:T,isStreaming:P,shownValue:j,unit:h,streakDays:v,streakDates:A,timePeriodLabel:r,progress:c}=D({categoryNames:l,label:u,focusColor:k,streakKey:"",streakTitle:m,streakBarColor:p,streakHoverColor:C,streakGlowColor:N,summaryType:E,quipDefault:b});return console.log("Rendering CategoryPage for",l),console.log({quippySummary:T,isStreaming:P,shownValue:j,unit:h,streakDays:v,streakDates:A,timePeriodLabel:r,progress:c}),e.jsxs("div",{className:"min-h-screen p-4 sm:p-8 flex items-center justify-center bg-gray-900 font-sans",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden -z-10",children:[e.jsx("div",{style:{backgroundColor:y[0]},className:"absolute top-10 left-1/4 w-96 h-96 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob"}),e.jsx("div",{style:{backgroundColor:y[1]},className:"absolute top-1/2 right-0 w-80 h-80 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-2000"}),e.jsx("div",{style:{backgroundColor:y[2]},className:"absolute bottom-0 left-0 w-72 h-72 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-4000"})]}),e.jsxs("div",{className:"w-full max-w-xl p-6 md:p-8 rounded-3xl backdrop-filter backdrop-blur-xl bg-white/5 border border-white/10 shadow-2xl relative space-y-12",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold text-center text-white uppercase tracking-widest drop-shadow-lg",children:g}),e.jsx(F,{hours:j,unit:h,label:u,focusColor:k}),e.jsx("div",{className:"flex flex-col items-center justify-center p-6 bg-white/10 rounded-2xl border border-white/10 shadow-lg w-full max-w-lg mx-auto my-4",children:e.jsx("p",{className:"text-base sm:text-lg font-semibold text-white text-center",children:P?e.jsxs("span",{children:[T,e.jsx("span",{className:"animate-pulse",children:"|"})]}):T||b})}),e.jsx(G,{streakDays:v,timePeriodLabel:r,streakDates:A,progress:c,barColor:p,hoverColor:C,glowColor:N,title:m}),t.length>0&&(()=>{const a=x-1;let s=a>=0?t[a]:null,o="",n="";x===0?n="tabwrapstats.html":s&&(s.includes("/")?o=s.split("/")[0].replace(/\s+/g,"").toLowerCase():o=s.split(" ")[0].toLowerCase(),n=`${o}.html`);const f="w-56 h-12 mx-2 rounded-xl font-semibold text-white text-base bg-[#23243a] shadow-md hover:bg-[#2d2e4a] transition-all flex items-center justify-center tracking-wide";return x===0||x===t.length-1?x===0?e.jsxs("div",{className:"flex justify-center items-center mt-8 gap-6",children:[e.jsx("button",{className:f,style:{minWidth:"14rem",maxWidth:"14rem",height:"3rem",boxShadow:"0 2px 12px rgba(56,189,248,0.10)",border:"1px solid #2d2e4a"},onClick:()=>window.location.href=n,children:"Back to Stats"}),e.jsxs("button",{className:f,style:{minWidth:"14rem",maxWidth:"14rem",height:"3rem",boxShadow:"0 2px 12px rgba(56,189,248,0.10)",border:"1px solid #2d2e4a"},onClick:()=>window.location.href=L,children:["Go to next top category: ",w]})]}):e.jsx("div",{className:"flex justify-center mt-8",children:e.jsxs("button",{className:f,style:{minWidth:"14rem",maxWidth:"14rem",height:"3rem",boxShadow:"0 2px 12px rgba(56,189,248,0.10)",border:"1px solid #2d2e4a"},onClick:()=>window.location.href=n,children:["Back to previous category",s?": "+s:""]})}):e.jsxs("div",{className:"flex justify-center items-center mt-8 gap-6",children:[e.jsxs("button",{className:f,style:{minWidth:"14rem",maxWidth:"14rem",height:"3rem",boxShadow:"0 2px 12px rgba(56,189,248,0.10)",border:"1px solid #2d2e4a"},onClick:()=>window.location.href=n,children:["Back to previous category: ",s]}),e.jsxs("button",{className:f,style:{minWidth:"14rem",maxWidth:"14rem",height:"3rem",boxShadow:"0 2px 12px rgba(56,189,248,0.10)",border:"1px solid #2d2e4a"},onClick:()=>window.location.href=L,children:["Go to next top category: ",w]})]})})()]}),e.jsx("style",{children:`
        @keyframes blob {
          0% {
            transform: translate(0px, 0px) scale(1);
          }
          33% {
            transform: translate(30px, -50px) scale(1.1);
          }
          66% {
            transform: translate(-20px, 20px) scale(0.9);
          }
          100% {
            transform: translate(0px, 0px) scale(1);
          }
        }
        .animate-blob {
          animation: blob 7s infinite cubic-bezier(0.6, -0.28, 0.735, 0.045);
        }
        .animation-delay-2000 {
          animation-delay: 2s;
        }
        .animation-delay-4000 {
          animation-delay: 4s;
        }
        @keyframes pulse {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.5; }
        }
        .animate-pulse {
            animation: pulse 1s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
      `})]})}export{q as C};
