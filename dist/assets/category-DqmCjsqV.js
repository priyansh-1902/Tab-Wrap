import{r as u,j as e,c as O}from"./client-yEZ_Fi89.js";import{C as D,P as F,N as K,S as _,a as q,H as G,M as L,b as V,c as Q,d as Y,D as J,B as X}from"./sun-BC3hyl_E.js";import{c as I}from"./createLucideIcon-BG492Xwo.js";/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ee=I("clock",Z);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],re=I("hash",te);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],se=I("trophy",ae);function oe({categoryNames:s=[],label:d="",focusColor:n="#4ade80",streakKey:m="",streakTitle:w="TOP FOCUS STREAK",streakBarColor:j="bg-purple-500",streakHoverColor:E="hover:bg-purple-400",streakGlowColor:p="rgba(168, 85, 247, 0.8)",summaryType:R="",quipDefault:o="Keep up the grind!"}){const[h,y]=u.useState(""),[f,$]=u.useState(!1),c=u.useRef("");u.useEffect(()=>{async function t(){if(!window.LanguageModel){y(o);return}if(await window.LanguageModel.availability()==="unavailable"){y(o);return}const a=await window.LanguageModel.create();chrome.storage.local.get(["tabWrapSummary"],async i=>{const x=i.tabWrapSummary||{};let b=null;for(const A of s)if(x.categorySummaries?.[A]!==void 0){b=A;break}const g=b?x.categorySummaries[b]:"";if(g){const A=g+`
Write a quippy statement about this ${R} summary, as if talking to the user, in less than 50 characters.`;try{$(!0);let M="";for await(const B of a.promptStreaming(A))M+=B,c.current=M,y(M);$(!1),a.destroy()}catch{y(o),$(!1)}}else y(o)})}t()},[]);const[l,U]=u.useState({totalSeconds:0,streakArr:[]});u.useEffect(()=>{chrome.storage.local.get(["tabWrapSummary"],t=>{const r=t.tabWrapSummary||{};let a=null;for(const b of s)if(r.categoryTotals?.[b]!==void 0){a=b;break}const i=a?r.categoryTotals[a]:0;let x=[];m&&Array.isArray(r[m])?x=r[m]:a&&Array.isArray(r.topCategoryStreaks?.[a])&&(x=r.topCategoryStreaks[a]),U({totalSeconds:i,streakArr:x})})},[]);const v=Array.isArray(l.streakArr)?l.streakArr.map(t=>t.seconds!==void 0?t.seconds:t.minutes!==void 0?t.minutes*60:0):[],H=Array.isArray(l.streakArr)?l.streakArr.map(t=>t.date?new Date(t.date).toLocaleString("en-US",{month:"short",day:"numeric"}):""):[],z=Array.isArray(l.streakArr)&&l.streakArr.length?`${new Date(l.streakArr[0].date).toLocaleString("en-US",{month:"short",day:"numeric"})} - ${new Date(l.streakArr[l.streakArr.length-1].date).toLocaleString("en-US",{month:"short",day:"numeric"})}`:"",[T,S]=u.useState(0);u.useEffect(()=>{let t,r=1200;function a(i){t||(t=i);const x=Math.min((i-t)/r,1);S(x),x<1?requestAnimationFrame(a):S(1)}return requestAnimationFrame(a),()=>S(0)},[l.totalSeconds,v.length,v.join(",")]);const k=Math.floor(T*l.totalSeconds);let C="HOURS",N=Math.floor(k/3600);return k<60?(C="SECONDS",N=k):k<3600&&(C="MINUTES",N=Math.floor(k/60)),{quippySummary:h,isStreaming:f,shownValue:N,unit:C,streakDays:v,streakDates:H,timePeriodLabel:z,progress:T}}function ne({hours:s,unit:d,label:n,focusColor:m,iconColor:w="#4ade80"}){return e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 bg-gradient-to-br from-gray-800/40 to-gray-900/40 rounded-2xl border border-gray-700/50 shadow-xl w-full max-w-lg mx-auto",children:[e.jsx("div",{className:"text-white mb-4 p-3 rounded-full",style:{backgroundColor:w+"22"},children:e.jsx(ee,{className:"w-10 h-10",style:{color:w}})}),e.jsx("p",{className:"text-7xl sm:text-8xl font-extrabold",style:{color:m},children:s}),e.jsx("p",{className:"text-sm sm:text-base font-semibold text-gray-400 uppercase tracking-widest mt-3",children:d}),e.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-white mt-4 text-center",children:n})]})}function le({streakDays:s,timePeriodLabel:d,streakDates:n,progress:m,title:w="TOP FOCUS STREAK",color:j="#4ade80",glowColor:E}){const p=Math.max(...s,1),o=s.map(h=>p?h/p:0).map(h=>h*(typeof m=="number"?m:1));return e.jsxs("div",{className:"flex flex-col items-center w-full mt-10",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-6 uppercase tracking-wider",children:w}),e.jsxs("div",{className:"flex items-end space-x-2 w-full max-w-sm px-4",children:[o.map((h,y)=>e.jsx("div",{className:"flex-1 rounded-t-lg transition-all duration-300 cursor-pointer",style:{height:`${h*100}px`,minHeight:"4px",backgroundColor:j,boxShadow:`0 0 10px ${h>.8?E||j:"transparent"}`,transition:"height 0.3s cubic-bezier(0.4,0,0.2,1)"}},y)),e.jsx(se,{className:"w-8 h-8 ml-4 animate-pulse",style:{color:j}})]}),e.jsx("p",{className:"text-sm text-gray-400 mt-4 font-semibold tracking-wide",children:d})]})}function ie({categoryNames:s=[],label:d="",focusColor:n="#4ade80",streakTitle:m="TOP CATEGORY STREAK",quipDefault:w="Keep going!",pageTitle:j="CATEGORY SUMMARY"}){console.log("color:",n);const E=t=>{const r={Work:X,Finance:J,Hobbies:Y,Spirituality:Q,Health:V,Social:L,"Social Media":L,Community:G,Entertainment:q,Shopping:_,News:K,Travel:F,Miscellaneous:re,default:D};if(r[t])return r[t];const a=t.split(" ")[0];return r[a]||r.default},[p,R]=u.useState([]),[o,h]=u.useState({});u.useEffect(()=>{chrome.storage.local.get(["tabWrapSummary","profile"],t=>{const r=t.tabWrapSummary||{},a=Array.isArray(r.categoryPercents)?r.categoryPercents.slice(0,5):[];R(a.map(g=>g.cat));const x=(t.profile||{}).categories||[],b={};x.forEach(g=>{const A=typeof g=="string"?g:g.text,M=typeof g=="string"?n:g.color;b[A]=M}),h(b)})},[s]);let y=s&&s.length?s[0]:d;const f=p.findIndex(t=>t===y),$=f>=0?(f+1)%p.length:0,c=p[$]||"",l=t=>{if(!t)return"tabwrapstats.html";const r=o[t]||n;return`category.html?name=${encodeURIComponent(t)}&color=${encodeURIComponent(r)}`},U=l(c),{quippySummary:v,isStreaming:H,shownValue:z,unit:T,streakDays:S,streakDates:k,timePeriodLabel:C,progress:N}=oe({categoryNames:s,label:d,focusColor:n,streakKey:"",streakTitle:m,streakBarColor:void 0,streakHoverColor:void 0,streakGlowColor:void 0,summaryType:void 0,quipDefault:w});return console.log("Rendering CategoryPage for",s),console.log({quippySummary:v,isStreaming:H,shownValue:z,unit:T,streakDays:S,streakDates:k,timePeriodLabel:C,progress:N}),e.jsxs("div",{className:"min-h-screen p-4 sm:p-8 flex items-center justify-center font-sans",style:{backgroundColor:"#0a0a0a"},children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden -z-10",children:[e.jsx("div",{className:"absolute top-10 left-1/4 w-96 h-96 rounded-full mix-blend-lighten filter blur-3xl opacity-20 animate-blob",style:{backgroundColor:n}}),e.jsx("div",{className:"absolute top-1/2 right-0 w-80 h-80 bg-purple-500 rounded-full mix-blend-lighten filter blur-3xl opacity-15 animate-blob animation-delay-2000"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 rounded-full mix-blend-lighten filter blur-3xl opacity-10 animate-blob animation-delay-4000",style:{backgroundColor:n}})]}),e.jsxs("div",{className:"w-full max-w-2xl p-8 md:p-10 rounded-3xl backdrop-filter backdrop-blur-xl bg-gradient-to-br from-gray-900/80 via-gray-900/70 to-gray-800/80 border border-gray-700/50 shadow-2xl relative space-y-10",children:[e.jsxs("div",{className:"flex flex-col items-center mb-2",children:[(()=>{console.log("Rendering icon for category:",d,s);const t=(s&&s.length?s[0]:d)||"default",r=E(t);return e.jsx(r,{className:"w-16 h-16 mb-3",style:{color:n},"aria-label":d+" icon"})})(),e.jsx("h1",{className:"text-4xl sm:text-5xl font-extrabold text-center uppercase tracking-wider drop-shadow-lg",style:{background:`linear-gradient(135deg, ${n} 0%, ${n}99 100%)`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:j})]}),e.jsx(ne,{hours:z,unit:T,label:d,focusColor:n,iconColor:n}),e.jsx("div",{className:"flex flex-col items-center justify-center p-6 bg-gradient-to-br from-gray-800/30 to-gray-900/30 rounded-2xl border border-gray-700/50 shadow-lg w-full max-w-lg mx-auto my-4",children:e.jsx("p",{className:"text-lg sm:text-xl font-semibold text-white text-center leading-relaxed",children:H?e.jsxs("span",{children:[v,e.jsx("span",{className:"animate-pulse",children:"|"})]}):v||w})}),e.jsx(le,{streakDays:S,timePeriodLabel:C,streakDates:k,progress:N,barColor:void 0,hoverColor:void 0,glowColor:n,title:m,color:n}),p.length===1?e.jsx("div",{className:"flex justify-center mt-8",children:e.jsxs("button",{className:"group px-8 py-4 rounded-2xl font-bold text-white text-base bg-gradient-to-r from-gray-800 via-gray-900 to-gray-800 border-2 border-gray-700 shadow-xl hover:shadow-2xl hover:border-gray-600 transition-all duration-300 flex items-center justify-center space-x-2 transform hover:scale-105",onClick:()=>window.location.href="tabwrapstats.html",children:[e.jsx("span",{className:"text-2xl group-hover:animate-pulse",children:"â†"}),e.jsx("span",{children:"Back to Stats"})]})}):p.length>0&&(()=>{const t=f-1;let r=t>=0?p[t]:null,a="";f===0?a="tabwrapstats.html":r&&(a=l(r));const i="group relative px-6 py-4 rounded-2xl font-bold text-white text-sm overflow-hidden transition-all duration-300 flex items-center justify-center space-x-2 transform hover:scale-105";return f===0||f===p.length-1?f===0?e.jsxs("div",{className:"flex flex-wrap justify-center items-center mt-8 gap-4",children:[e.jsxs("button",{className:`${i} bg-gradient-to-r from-gray-800 to-gray-900 border-2 border-gray-700 shadow-xl hover:shadow-2xl hover:border-gray-600`,onClick:()=>window.location.href=a,children:[e.jsx("span",{className:"text-xl group-hover:animate-pulse",children:"â†"}),e.jsx("span",{className:"relative z-10",children:"Back to Stats"})]}),e.jsxs("button",{className:`${i} bg-gradient-to-r from-purple-600 to-pink-600 border-2 border-purple-500 shadow-xl hover:shadow-2xl hover:border-purple-400`,style:{background:`linear-gradient(135deg, ${o[c]||"#a855f7"} 0%, ${o[c]||"#ec4899"} 100%)`},onClick:()=>window.location.href=U,children:[e.jsxs("span",{className:"relative z-10",children:["Next: ",c]}),e.jsx("span",{className:"text-xl group-hover:animate-pulse",children:"â†’"})]})]}):e.jsx("div",{className:"flex justify-center mt-8",children:e.jsxs("button",{className:`${i} bg-gradient-to-r from-gray-800 to-gray-900 border-2 border-gray-700 shadow-xl hover:shadow-2xl hover:border-gray-600`,onClick:()=>window.location.href=a,children:[e.jsx("span",{className:"text-xl group-hover:animate-pulse",children:"â†"}),e.jsxs("span",{className:"relative z-10",children:["Back",r?`: ${r}`:""]})]})}):e.jsxs("div",{className:"flex flex-wrap justify-center items-center mt-8 gap-4",children:[e.jsxs("button",{className:`${i} bg-gradient-to-r from-gray-800 to-gray-900 border-2 border-gray-700 shadow-xl hover:shadow-2xl hover:border-gray-600`,style:r&&o[r]?{background:`linear-gradient(135deg, ${o[r]}33 0%, ${o[r]}11 100%)`,borderColor:o[r]+"66"}:{},onClick:()=>window.location.href=a,children:[e.jsx("span",{className:"text-xl group-hover:animate-pulse",children:"â†"}),e.jsx("span",{className:"relative z-10",children:r})]}),e.jsxs("button",{className:`${i} bg-gradient-to-r from-purple-600 to-pink-600 border-2 border-purple-500 shadow-xl hover:shadow-2xl hover:border-purple-400`,style:c&&o[c]?{background:`linear-gradient(135deg, ${o[c]} 0%, ${o[c]}cc 100%)`,borderColor:o[c]}:{},onClick:()=>window.location.href=U,children:[e.jsx("span",{className:"relative z-10",children:c}),e.jsx("span",{className:"text-xl group-hover:animate-pulse",children:"â†’"})]})]})})()]}),e.jsx("style",{children:`
        @keyframes blob {
          0% {
            transform: translate(0px, 0px) scale(1);
          }
          33% {
            transform: translate(30px, -50px) scale(1.1);
          }
          66% {
            transform: translate(-20px, 20px) scale(0.9);
          }
          100% {
            transform: translate(0px, 0px) scale(1);
          }
        }
        .animate-blob {
          animation: blob 7s infinite cubic-bezier(0.6, -0.28, 0.735, 0.045);
        }
        .animation-delay-2000 {
          animation-delay: 2s;
        }
        .animation-delay-4000 {
          animation-delay: 4s;
        }
        @keyframes pulse {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.5; }
        }
        .animate-pulse {
            animation: pulse 1s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
      `})]})}const W=new URLSearchParams(window.location.search),P=W.get("name")||"Miscellaneous",ce=W.get("color")||"#9ca3af",de=document.getElementById("root");O.createRoot(de).render(e.jsx(ie,{categoryNames:[P],label:`SPENT ON ${P.toUpperCase()}`,focusColor:ce,streakTitle:`${P.toUpperCase()} STREAK`,summaryType:P.toLowerCase(),quipDefault:"Keep it up! ðŸš€",pageTitle:P.toUpperCase()}));
