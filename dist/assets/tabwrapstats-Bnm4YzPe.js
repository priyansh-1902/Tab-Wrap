import{j as e,c as T,r as n}from"./client-BCr4-QWM.js";/* empty css                       */import{B as E}from"./Background-lBRQ3jij.js";function C({children:t,colorScheme:c}){const f=c?.topGrad||c?.gradient||"linear-gradient(90deg, #ff2dbe 0%, #a259ff 100%)",p=c?.botGrad||c?.gradient||"linear-gradient(120deg, #ff2dbe 0%, #a259ff 100%)",h=c?.background||"#0b0b0b";return e.jsxs("div",{className:"frame",style:{"--topGrad":f,"--botGrad":p,background:h},children:[e.jsx("div",{className:"band band--top"}),e.jsx("div",{className:"band band--bottom"}),e.jsx("div",{className:"frame__content",children:t})]})}const w=[{gradient:"linear-gradient(90deg, #ff2dbe 0%, #a259ff 100%)",bar:"linear-gradient(90deg, #ff2dbe 0%, #a259ff 100%)",accent:"#a259ff",background:"#0b0b0b"},{gradient:"linear-gradient(90deg, #39ff14 0%, #00ffa2 100%)",bar:"linear-gradient(90deg, #39ff14 0%, #00ffa2 100%)",accent:"#39ff14",background:"#0b0b0b"}];function B(){return w[Math.floor(Math.random()*w.length)]}function W(){const[t,c]=n.useState(null),[f,p]=n.useState({}),[h,j]=n.useState([]),[S,N]=n.useState([]),[l]=n.useState(B()),[x,u]=n.useState(""),[v,b]=n.useState(!1),k=n.useRef("");if(console.log("Color Scheme:",l),n.useEffect(()=>{chrome.storage.local.get(["tabWrapSummary","profile"],async a=>{c(a.tabWrapSummary||null);const s=(a.profile?.categories||[]).map(r=>typeof r=="string"?{text:r,emoji:""}:r),o={};s.forEach(r=>{o[r.text]=r.emoji||""}),p(o)})},[]),n.useEffect(()=>{if(!t||!t.categoryPercents)return;const a=800;let s;return window.LanguageModel&&t?(u(""),b(!1),s=setTimeout(async()=>{b(!0);const o=`User description: ${t.profile?.description||""}
Category totals (seconds): ${JSON.stringify(t.categoryTotals)}
Total time spent: ${t.totalMinutes} minutes.

Write a short, witty summary about this user's browsing habits based on their self-description and category totals. Write as if you're talking to the user, not describing them. Make it fun and personalized. STRICTLY KEEP IT UNDER 20 WORDS AND NO EMOJIS.`;try{const r=await window.LanguageModel.create();let i="";for await(const d of r.promptStreaming(o))i+=d,k.current=i,u(i);b(!1),r.destroy()}catch{u("Gemini Nano could not generate a summary."),b(!1)}},a)):t?.quippySummary&&u(t.quippySummary),()=>clearTimeout(s)},[t]),n.useEffect(()=>{if(!t||!t.categoryPercents)return;j(Array(t.categoryPercents.length).fill(0)),N(Array(t.categoryPercents.length).fill(0));const a=800,s=30;t.categoryPercents.forEach((o,r)=>{let i=0;const d=o.pct,M=setInterval(()=>{i++,j(y=>{const g=[...y];return g[r]=Math.min(d,d*i/s),g}),N(y=>{const g=[...y];return g[r]=Math.min(d,d*i/s),g}),i>=s&&clearInterval(M)},a/s)})},[t]),!t)return e.jsx("div",{className:"bg-black text-white min-h-screen p-10 text-center",children:"No stats available. Please run Tab Wrap from the options page."});const m=t.categoryPercents||[];return console.log("Sorted Categories:",m),e.jsxs(e.Fragment,{children:[e.jsx(E,{}),e.jsxs(C,{colorScheme:l,children:[e.jsx("div",{className:"text-lg font-semibold tracking-widest mb-2 opacity-85",children:"TAB WRAP - OCTOBER"}),e.jsx("div",{className:"text-4xl font-bold mb-3",children:"Your Browsing Stats"}),e.jsx("div",{className:"text-xl mb-2 opacity-80",children:"Total Minutes Spent Browsing"}),e.jsx("div",{className:"text-7xl font-extrabold mb-4 tracking-widest",children:t.totalMinutes>0?t.totalMinutes.toLocaleString():`${t.totalSeconds} sec`}),e.jsxs("div",{className:"text-lg mb-2",children:["You opened a ",t.totalTabs>1e3?"massive":"mere"," ",e.jsxs("span",{style:{color:"#ffe082",fontWeight:700},children:[t.totalTabs.toLocaleString()," new tabs"]})," this month!"]}),x&&e.jsx("div",{className:"text-base mb-4",style:{color:l.accent,fontWeight:500,opacity:.92},children:v?e.jsxs("span",{children:[x,e.jsx("span",{className:"animate-pulse",children:"|"})]}):x}),e.jsxs("div",{className:"stats-container",children:[e.jsx("div",{className:"stats-title",children:"Activity Breakdown (By Time)"}),e.jsx("div",{className:"stats-breakdown",style:{borderBottom:`2px solid ${l.accent}`}}),e.jsx("div",{className:"flex flex-col items-center w-full",style:{maxWidth:480},children:m.slice(0,5).map((a,s)=>e.jsxs("div",{className:"stats-category",children:[e.jsxs("div",{className:"stats-category-header",children:[e.jsxs("span",{className:"flex items-center text-white font-bold",children:[f[a.cat]&&e.jsx("span",{className:"stats-category-emoji",children:f[a.cat]}),a.cat]}),e.jsxs("span",{className:"text-white font-bold",children:[(S[s]||0).toFixed(1),"%"]})]}),e.jsx("div",{className:"stats-bar-bg",children:e.jsx("div",{className:"stats-bar",style:{background:l.bar,width:`${h[s]||0}%`,transition:"width 0.2s"}})})]},a.cat))}),m.length>0&&(()=>{const a=m[0].cat;let s="";a.includes("/")?s=a.split("/")[0].replace(/\s+/g,"").toLowerCase():s=a.split(" ")[0].toLowerCase();const o=`${s}.html`;return e.jsx("button",{className:"stats-social-btn",style:{background:l.gradient,boxShadow:"0 2px 8px rgba(162,89,255,0.12)",marginTop:"18px"},onClick:()=>window.location.href=o,children:"Go to your top category page"})})(),m.slice(0,5).some(a=>a.cat==="Social Media / Messaging"||a.cat==="Social Media")&&e.jsx("button",{className:"stats-social-btn",style:{background:l.gradient,boxShadow:"0 2px 8px rgba(162,89,255,0.12)"},onClick:()=>window.location.href="socialmedia.html",children:"Wanna see how much time you spent on social media?"})]})]})]})}const P=document.getElementById("root");T.createRoot(P).render(e.jsx(W,{}));
