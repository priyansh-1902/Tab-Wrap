import{r as h,j as e}from"./client-BF1lwM7Z.js";import{C as O,P as B,N as I,S as D,a as $,H as G,M as z,b as F,c as K,d as q,D as Q,B as V}from"./sun-BnDqY9iL.js";import{C as Y,T as J}from"./trophy-CySomSps.js";function X({categoryNames:r=[],label:l="",focusColor:c="#4ade80",streakKey:m="",streakTitle:f="TOP FOCUS STREAK",streakBarColor:S="bg-purple-500",streakHoverColor:A="hover:bg-purple-400",streakGlowColor:d="rgba(168, 85, 247, 0.8)",summaryType:W="",quipDefault:g="Keep up the grind!"}){const[n,p]=h.useState(""),[w,y]=h.useState(!1),P=h.useRef("");h.useEffect(()=>{async function t(){if(!window.LanguageModel){p(g);return}if(await window.LanguageModel.availability()==="unavailable"){p(g);return}const o=await window.LanguageModel.create();chrome.storage.local.get(["tabWrapSummary"],async C=>{const u=C.tabWrapSummary||{};let v=null;for(const L of r)if(u.categorySummaries?.[L]!==void 0){v=L;break}const H=v?u.categorySummaries[v]:"";if(H){const L=H+`
Write a quippy statement about this ${W} summary, as if talking to the user, in less than 50 characters.`;try{y(!0);let R="";for await(const U of o.promptStreaming(L))R+=U,P.current=R,p(R);y(!1),o.destroy()}catch{p(g),y(!1)}}else p(g)})}t()},[]);const[i,T]=h.useState({totalSeconds:0,streakArr:[]});h.useEffect(()=>{chrome.storage.local.get(["tabWrapSummary"],t=>{const a=t.tabWrapSummary||{};let o=null;for(const v of r)if(a.categoryTotals?.[v]!==void 0){o=v;break}const C=o?a.categoryTotals[o]:0;let u=[];m&&Array.isArray(a[m])?u=a[m]:o&&Array.isArray(a.topCategoryStreaks?.[o])&&(u=a.topCategoryStreaks[o]),T({totalSeconds:C,streakArr:u})})},[]);const k=Array.isArray(i.streakArr)?i.streakArr.map(t=>t.seconds!==void 0?t.seconds:t.minutes!==void 0?t.minutes*60:0):[],E=Array.isArray(i.streakArr)?i.streakArr.map(t=>t.date?new Date(t.date).toLocaleString("en-US",{month:"short",day:"numeric"}):""):[],M=Array.isArray(i.streakArr)&&i.streakArr.length?`${new Date(i.streakArr[0].date).toLocaleString("en-US",{month:"short",day:"numeric"})} - ${new Date(i.streakArr[i.streakArr.length-1].date).toLocaleString("en-US",{month:"short",day:"numeric"})}`:"",[N,j]=h.useState(0);h.useEffect(()=>{let t,a=1200;function o(C){t||(t=C);const u=Math.min((C-t)/a,1);j(u),u<1?requestAnimationFrame(o):j(1)}return requestAnimationFrame(o),()=>j(0)},[i.totalSeconds,k.length,k.join(",")]);const b=Math.floor(N*i.totalSeconds);let x="HOURS",s=Math.floor(b/3600);return b<60?(x="SECONDS",s=b):b<3600&&(x="MINUTES",s=Math.floor(b/60)),{quippySummary:n,isStreaming:w,shownValue:s,unit:x,streakDays:k,streakDates:E,timePeriodLabel:M,progress:N}}function Z({hours:r,unit:l,label:c,focusColor:m,iconColor:f="#4ade80"}){return e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 bg-white/5 rounded-2xl border border-white/10 shadow-xl w-full max-w-lg mx-auto",children:[e.jsx("div",{className:"text-white mb-4 p-2 rounded-full",style:{backgroundColor:f+"33"},children:e.jsx(Y,{className:"w-8 h-8",style:{color:f}})}),e.jsx("p",{className:"text-6xl sm:text-7xl font-extrabold",style:{color:m},children:r}),e.jsx("p",{className:"text-sm sm:text-base font-semibold text-gray-400 uppercase tracking-widest mt-2",children:l}),e.jsx("p",{className:"text-2xl sm:text-3xl font-extrabold text-white mt-4 text-center",children:c})]})}function _({streakDays:r,timePeriodLabel:l,streakDates:c,progress:m,title:f="TOP FOCUS STREAK",color:S="#4ade80",glowColor:A}){const d=Math.max(...r,1),g=r.map(n=>d?n/d:0).map(n=>n*(typeof m=="number"?m:1));return e.jsxs("div",{className:"flex flex-col items-center w-full mt-10",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-6 uppercase tracking-wider",children:f}),e.jsxs("div",{className:"flex items-end space-x-2 w-full max-w-sm px-4",children:[g.map((n,p)=>e.jsx("div",{className:"flex-1 rounded-t-lg transition-all duration-300 cursor-pointer",style:{height:`${n*100}px`,minHeight:"4px",backgroundColor:S,boxShadow:`0 0 10px ${n>.8?A||S:"transparent"}`,transition:"height 0.3s cubic-bezier(0.4,0,0.2,1)"}},p)),e.jsx(J,{className:"w-8 h-8 ml-4 animate-pulse",style:{color:S}})]}),e.jsx("p",{className:"text-sm text-gray-400 mt-4 font-semibold tracking-wide",children:l})]})}function re({categoryNames:r=[],label:l="",focusColor:c="#4ade80",streakTitle:m="TOP CATEGORY STREAK",quipDefault:f="Keep going!",pageTitle:S="CATEGORY SUMMARY"}){console.log("color:",c);const A={Work:V,Finance:Q,Hobbies:q,Spirituality:K,Health:F,Social:z,Community:G,Entertainment:$,Shopping:D,News:I,Travel:B,default:O},[d,W]=h.useState([]);h.useEffect(()=>{chrome.storage.local.get(["tabWrapSummary"],x=>{const s=x.tabWrapSummary||{},t=Array.isArray(s.categoryPercents)?s.categoryPercents.slice(0,5):[];W(t.map(a=>a.cat))})},[r]);let g=r&&r.length?r[0]:l;const n=d.findIndex(x=>x===g),p=n>=0?(n+1)%d.length:0,w=d[p]||"";let y="";w.includes("/")?y=w.split("/")[0].replace(/\s+/g,"").toLowerCase():y=w.split(" ")[0].toLowerCase();const P=`${y}.html`,{quippySummary:i,isStreaming:T,shownValue:k,unit:E,streakDays:M,streakDates:N,timePeriodLabel:j,progress:b}=X({categoryNames:r,label:l,focusColor:c,streakKey:"",streakTitle:m,streakBarColor:void 0,streakHoverColor:void 0,streakGlowColor:void 0,summaryType:void 0,quipDefault:f});return console.log("Rendering CategoryPage for",r),console.log({quippySummary:i,isStreaming:T,shownValue:k,unit:E,streakDays:M,streakDates:N,timePeriodLabel:j,progress:b}),e.jsxs("div",{className:"min-h-screen p-4 sm:p-8 flex items-center justify-center bg-gray-900 font-sans",children:[e.jsxs("div",{className:"w-full max-w-xl p-6 md:p-8 rounded-3xl backdrop-filter backdrop-blur-xl bg-white/5 border border-white/10 shadow-2xl relative space-y-12",children:[e.jsxs("div",{className:"flex flex-col items-center mb-2",children:[(()=>{console.log("Rendering icon for category:",l,r);const s=((r&&r.length?r[0]:l)||"default").split("/")[0].split(" ")[0],t=s?s.charAt(0).toUpperCase()+s.slice(1).toLowerCase():"default",a=A[t]||A.default;return e.jsx(a,{className:"w-14 h-14 mb-2",style:{color:c},"aria-label":l+" icon"})})(),e.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold text-center text-white uppercase tracking-widest drop-shadow-lg",children:S})]}),e.jsx(Z,{hours:k,unit:E,label:l,focusColor:c,iconColor:c}),e.jsx("div",{className:"flex flex-col items-center justify-center p-6 bg-white/10 rounded-2xl border border-white/10 shadow-lg w-full max-w-lg mx-auto my-4",children:e.jsx("p",{className:"text-base sm:text-lg font-semibold text-white text-center",children:T?e.jsxs("span",{children:[i,e.jsx("span",{className:"animate-pulse",children:"|"})]}):i||f})}),e.jsx(_,{streakDays:M,timePeriodLabel:j,streakDates:N,progress:b,barColor:void 0,hoverColor:void 0,glowColor:c,title:m,color:c}),d.length===1?e.jsx("div",{className:"flex justify-center mt-8",children:e.jsx("button",{className:"w-56 h-12 mx-2 rounded-xl font-semibold text-white text-base bg-[#23243a] shadow-md hover:bg-[#2d2e4a] transition-all flex items-center justify-center tracking-wide",style:{minWidth:"14rem",maxWidth:"14rem",height:"3rem",boxShadow:"0 2px 12px rgba(56,189,248,0.10)",border:"1px solid #2d2e4a"},onClick:()=>window.location.href="tabwrapstats.html",children:"Back to Stats"})}):d.length>0&&(()=>{const x=n-1;let s=x>=0?d[x]:null,t="",a="";n===0?a="tabwrapstats.html":s&&(s.includes("/")?t=s.split("/")[0].replace(/\s+/g,"").toLowerCase():t=s.split(" ")[0].toLowerCase(),a=`${t}.html`);const o="w-56 h-12 mx-2 rounded-xl font-semibold text-white text-base bg-[#23243a] shadow-md hover:bg-[#2d2e4a] transition-all flex items-center justify-center tracking-wide";return n===0||n===d.length-1?n===0?e.jsxs("div",{className:"flex justify-center items-center mt-8 gap-6",children:[e.jsx("button",{className:o,style:{minWidth:"14rem",maxWidth:"14rem",height:"3rem",boxShadow:"0 2px 12px rgba(56,189,248,0.10)",border:"1px solid #2d2e4a"},onClick:()=>window.location.href=a,children:"Back to Stats"}),e.jsxs("button",{className:o,style:{minWidth:"14rem",maxWidth:"14rem",height:"3rem",boxShadow:"0 2px 12px rgba(56,189,248,0.10)",border:"1px solid #2d2e4a"},onClick:()=>window.location.href=P,children:["Go to next top category: ",w]})]}):e.jsx("div",{className:"flex justify-center mt-8",children:e.jsxs("button",{className:o,style:{minWidth:"14rem",maxWidth:"14rem",height:"3rem",boxShadow:"0 2px 12px rgba(56,189,248,0.10)",border:"1px solid #2d2e4a"},onClick:()=>window.location.href=a,children:["Back to previous category",s?": "+s:""]})}):e.jsxs("div",{className:"flex justify-center items-center mt-8 gap-6",children:[e.jsxs("button",{className:o,style:{minWidth:"14rem",maxWidth:"14rem",height:"3rem",boxShadow:"0 2px 12px rgba(56,189,248,0.10)",border:"1px solid #2d2e4a"},onClick:()=>window.location.href=a,children:["Back to previous category: ",s]}),e.jsxs("button",{className:o,style:{minWidth:"14rem",maxWidth:"14rem",height:"3rem",boxShadow:"0 2px 12px rgba(56,189,248,0.10)",border:"1px solid #2d2e4a"},onClick:()=>window.location.href=P,children:["Go to next top category: ",w]})]})})()]}),e.jsx("style",{children:`
        @keyframes blob {
          0% {
            transform: translate(0px, 0px) scale(1);
          }
          33% {
            transform: translate(30px, -50px) scale(1.1);
          }
          66% {
            transform: translate(-20px, 20px) scale(0.9);
          }
          100% {
            transform: translate(0px, 0px) scale(1);
          }
        }
        .animate-blob {
          animation: blob 7s infinite cubic-bezier(0.6, -0.28, 0.735, 0.045);
        }
        .animation-delay-2000 {
          animation-delay: 2s;
        }
        .animation-delay-4000 {
          animation-delay: 4s;
        }
        @keyframes pulse {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.5; }
        }
        .animate-pulse {
            animation: pulse 1s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
      `})]})}export{re as C};
