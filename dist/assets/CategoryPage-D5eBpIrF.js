import{r as h,j as e}from"./client-BCr4-QWM.js";import{c as U,C as O,P as $,N as z,S as B,a as D,H as G,M as F,b as q,d as K,e as V,D as _,B as Q}from"./sun-DKYD_SEn.js";/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],J=U("clock",Y);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Z=U("trophy",X);function ee({categoryNames:r=[],label:l="",focusColor:c="#4ade80",streakKey:m="",streakTitle:g="TOP FOCUS STREAK",streakBarColor:S="bg-purple-500",streakHoverColor:A="hover:bg-purple-400",streakGlowColor:x="rgba(168, 85, 247, 0.8)",summaryType:M="",quipDefault:f="Keep up the grind!"}){const[n,p]=h.useState(""),[b,w]=h.useState(!1),W=h.useRef("");h.useEffect(()=>{async function t(){if(!window.LanguageModel){p(f);return}if(await window.LanguageModel.availability()==="unavailable"){p(f);return}const o=await window.LanguageModel.create();chrome.storage.local.get(["tabWrapSummary"],async j=>{const u=j.tabWrapSummary||{};let C=null;for(const E of r)if(u.categorySummaries?.[E]!==void 0){C=E;break}const R=C?u.categorySummaries[C]:"";if(R){const E=R+`
Write a quippy statement about this ${M} summary, as if talking to the user, in less than 50 characters.`;try{w(!0);let L="";for await(const I of o.promptStreaming(E))L+=I,W.current=L,p(L);w(!1),o.destroy()}catch{p(f),w(!1)}}else p(f)})}t()},[]);const[i,P]=h.useState({totalSeconds:0,streakArr:[]});h.useEffect(()=>{chrome.storage.local.get(["tabWrapSummary"],t=>{const a=t.tabWrapSummary||{};let o=null;for(const C of r)if(a.categoryTotals?.[C]!==void 0){o=C;break}const j=o?a.categoryTotals[o]:0;let u=[];m&&Array.isArray(a[m])?u=a[m]:o&&Array.isArray(a.topCategoryStreaks?.[o])&&(u=a.topCategoryStreaks[o]),P({totalSeconds:j,streakArr:u})})},[]);const k=Array.isArray(i.streakArr)?i.streakArr.map(t=>t.seconds!==void 0?t.seconds:t.minutes!==void 0?t.minutes*60:0):[],T=Array.isArray(i.streakArr)?i.streakArr.map(t=>t.date?new Date(t.date).toLocaleString("en-US",{month:"short",day:"numeric"}):""):[],H=Array.isArray(i.streakArr)&&i.streakArr.length?`${new Date(i.streakArr[0].date).toLocaleString("en-US",{month:"short",day:"numeric"})} - ${new Date(i.streakArr[i.streakArr.length-1].date).toLocaleString("en-US",{month:"short",day:"numeric"})}`:"",[N,v]=h.useState(0);h.useEffect(()=>{let t,a=1200;function o(j){t||(t=j);const u=Math.min((j-t)/a,1);v(u),u<1?requestAnimationFrame(o):v(1)}return requestAnimationFrame(o),()=>v(0)},[i.totalSeconds,k.length,k.join(",")]);const y=Math.floor(N*i.totalSeconds);let d="HOURS",s=Math.floor(y/3600);return y<60?(d="SECONDS",s=y):y<3600&&(d="MINUTES",s=Math.floor(y/60)),{quippySummary:n,isStreaming:b,shownValue:s,unit:d,streakDays:k,streakDates:T,timePeriodLabel:H,progress:N}}function te({hours:r,unit:l,label:c,focusColor:m,iconColor:g="#4ade80"}){return e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 bg-white/5 rounded-2xl border border-white/10 shadow-xl w-full max-w-lg mx-auto",children:[e.jsx("div",{className:"text-white mb-4 p-2 rounded-full",style:{backgroundColor:g+"33"},children:e.jsx(J,{className:"w-8 h-8",style:{color:g}})}),e.jsx("p",{className:"text-6xl sm:text-7xl font-extrabold",style:{color:m},children:r}),e.jsx("p",{className:"text-sm sm:text-base font-semibold text-gray-400 uppercase tracking-widest mt-2",children:l}),e.jsx("p",{className:"text-2xl sm:text-3xl font-extrabold text-white mt-4 text-center",children:c})]})}function ae({streakDays:r,timePeriodLabel:l,streakDates:c,progress:m,title:g="TOP FOCUS STREAK",color:S="#4ade80",glowColor:A}){const x=Math.max(...r,1),f=r.map(n=>x?n/x:0).map(n=>n*(typeof m=="number"?m:1));return e.jsxs("div",{className:"flex flex-col items-center w-full mt-10",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-6 uppercase tracking-wider",children:g}),e.jsxs("div",{className:"flex items-end space-x-2 w-full max-w-sm px-4",children:[f.map((n,p)=>e.jsx("div",{className:"flex-1 rounded-t-lg transition-all duration-300 cursor-pointer",style:{height:`${n*100}px`,minHeight:"4px",backgroundColor:S,boxShadow:`0 0 10px ${n>.8?A||S:"transparent"}`,transition:"height 0.3s cubic-bezier(0.4,0,0.2,1)"}},p)),e.jsx(Z,{className:"w-8 h-8 ml-4 animate-pulse",style:{color:S}})]}),e.jsx("p",{className:"text-sm text-gray-400 mt-4 font-semibold tracking-wide",children:l})]})}function oe({categoryNames:r=[],label:l="",focusColor:c="#4ade80",streakTitle:m="TOP CATEGORY STREAK",quipDefault:g="Keep going!",pageTitle:S="CATEGORY SUMMARY"}){console.log("color:",c);const A={Work:Q,Finance:_,Hobbies:V,Spirituality:K,Health:q,Social:F,Community:G,Entertainment:D,Shopping:B,News:z,Travel:$,default:O},[x,M]=h.useState([]);h.useEffect(()=>{chrome.storage.local.get(["tabWrapSummary"],d=>{const s=d.tabWrapSummary||{},t=Array.isArray(s.categoryPercents)?s.categoryPercents.slice(0,5):[];M(t.map(a=>a.cat))})},[r]);let f=r&&r.length?r[0]:l;const n=x.findIndex(d=>d===f),p=n>=0?(n+1)%x.length:0,b=x[p]||"";let w="";b.includes("/")?w=b.split("/")[0].replace(/\s+/g,"").toLowerCase():w=b.split(" ")[0].toLowerCase();const W=`${w}.html`,{quippySummary:i,isStreaming:P,shownValue:k,unit:T,streakDays:H,streakDates:N,timePeriodLabel:v,progress:y}=ee({categoryNames:r,label:l,focusColor:c,streakKey:"",streakTitle:m,streakBarColor:void 0,streakHoverColor:void 0,streakGlowColor:void 0,summaryType:void 0,quipDefault:g});return console.log("Rendering CategoryPage for",r),console.log({quippySummary:i,isStreaming:P,shownValue:k,unit:T,streakDays:H,streakDates:N,timePeriodLabel:v,progress:y}),e.jsxs("div",{className:"min-h-screen p-4 sm:p-8 flex items-center justify-center bg-gray-900 font-sans",children:[e.jsxs("div",{className:"w-full max-w-xl p-6 md:p-8 rounded-3xl backdrop-filter backdrop-blur-xl bg-white/5 border border-white/10 shadow-2xl relative space-y-12",children:[e.jsxs("div",{className:"flex flex-col items-center mb-2",children:[(()=>{console.log("Rendering icon for category:",l,r);const s=((r&&r.length?r[0]:l)||"default").split("/")[0].split(" ")[0],t=s?s.charAt(0).toUpperCase()+s.slice(1).toLowerCase():"default",a=A[t]||A.default;return e.jsx(a,{className:"w-14 h-14 mb-2",style:{color:c},"aria-label":l+" icon"})})(),e.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold text-center text-white uppercase tracking-widest drop-shadow-lg",children:S})]}),e.jsx(te,{hours:k,unit:T,label:l,focusColor:c,iconColor:c}),e.jsx("div",{className:"flex flex-col items-center justify-center p-6 bg-white/10 rounded-2xl border border-white/10 shadow-lg w-full max-w-lg mx-auto my-4",children:e.jsx("p",{className:"text-base sm:text-lg font-semibold text-white text-center",children:P?e.jsxs("span",{children:[i,e.jsx("span",{className:"animate-pulse",children:"|"})]}):i||g})}),e.jsx(ae,{streakDays:H,timePeriodLabel:v,streakDates:N,progress:y,barColor:void 0,hoverColor:void 0,glowColor:c,title:m,color:c}),x.length>0&&(()=>{const d=n-1;let s=d>=0?x[d]:null,t="",a="";n===0?a="tabwrapstats.html":s&&(s.includes("/")?t=s.split("/")[0].replace(/\s+/g,"").toLowerCase():t=s.split(" ")[0].toLowerCase(),a=`${t}.html`);const o="w-56 h-12 mx-2 rounded-xl font-semibold text-white text-base bg-[#23243a] shadow-md hover:bg-[#2d2e4a] transition-all flex items-center justify-center tracking-wide";return n===0||n===x.length-1?n===0?e.jsxs("div",{className:"flex justify-center items-center mt-8 gap-6",children:[e.jsx("button",{className:o,style:{minWidth:"14rem",maxWidth:"14rem",height:"3rem",boxShadow:"0 2px 12px rgba(56,189,248,0.10)",border:"1px solid #2d2e4a"},onClick:()=>window.location.href=a,children:"Back to Stats"}),e.jsxs("button",{className:o,style:{minWidth:"14rem",maxWidth:"14rem",height:"3rem",boxShadow:"0 2px 12px rgba(56,189,248,0.10)",border:"1px solid #2d2e4a"},onClick:()=>window.location.href=W,children:["Go to next top category: ",b]})]}):e.jsx("div",{className:"flex justify-center mt-8",children:e.jsxs("button",{className:o,style:{minWidth:"14rem",maxWidth:"14rem",height:"3rem",boxShadow:"0 2px 12px rgba(56,189,248,0.10)",border:"1px solid #2d2e4a"},onClick:()=>window.location.href=a,children:["Back to previous category",s?": "+s:""]})}):e.jsxs("div",{className:"flex justify-center items-center mt-8 gap-6",children:[e.jsxs("button",{className:o,style:{minWidth:"14rem",maxWidth:"14rem",height:"3rem",boxShadow:"0 2px 12px rgba(56,189,248,0.10)",border:"1px solid #2d2e4a"},onClick:()=>window.location.href=a,children:["Back to previous category: ",s]}),e.jsxs("button",{className:o,style:{minWidth:"14rem",maxWidth:"14rem",height:"3rem",boxShadow:"0 2px 12px rgba(56,189,248,0.10)",border:"1px solid #2d2e4a"},onClick:()=>window.location.href=W,children:["Go to next top category: ",b]})]})})()]}),e.jsx("style",{children:`
        @keyframes blob {
          0% {
            transform: translate(0px, 0px) scale(1);
          }
          33% {
            transform: translate(30px, -50px) scale(1.1);
          }
          66% {
            transform: translate(-20px, 20px) scale(0.9);
          }
          100% {
            transform: translate(0px, 0px) scale(1);
          }
        }
        .animate-blob {
          animation: blob 7s infinite cubic-bezier(0.6, -0.28, 0.735, 0.045);
        }
        .animation-delay-2000 {
          animation-delay: 2s;
        }
        .animation-delay-4000 {
          animation-delay: 4s;
        }
        @keyframes pulse {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.5; }
        }
        .animate-pulse {
            animation: pulse 1s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
      `})]})}export{oe as C};
