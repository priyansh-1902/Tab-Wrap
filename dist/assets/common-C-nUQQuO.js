import{r as i,j as s}from"./client-DUeHcXHK.js";import{C as D,T as F}from"./trophy-CQWQMqHT.js";function q({categoryNames:m=[],label:p="",focusColor:S="#4ade80",streakKey:l="",streakTitle:d="TOP FOCUS STREAK",streakBarColor:N="bg-purple-500",streakHoverColor:T="hover:bg-purple-400",streakGlowColor:E="rgba(168, 85, 247, 0.8)",summaryType:h="",quipDefault:x="Keep up the grind!"}){const[b,t]=i.useState(""),[w,k]=i.useState(!1),U=i.useRef("");i.useEffect(()=>{async function a(){if(!window.LanguageModel){t(x);return}if(await window.LanguageModel.availability()==="unavailable"){t(x);return}const r=await window.LanguageModel.create();chrome.storage.local.get(["tabWrapSummary"],async c=>{const n=c.tabWrapSummary||{};let u=null;for(const g of m)if(n.categorySummaries?.[g]!==void 0){u=g;break}const L=u?n.categorySummaries[u]:"";if(L){const g=L+`
Write a quippy statement about this ${h} summary, as if talking to the user, in less than 50 characters.`;try{k(!0);let y="";for await(const W of r.promptStreaming(g))y+=W,U.current=y,t(y);k(!1),r.destroy()}catch{t(x),k(!1)}}else t(x)})}a()},[]);const[e,$]=i.useState({totalMinutes:0,streakArr:[]});i.useEffect(()=>{chrome.storage.local.get(["tabWrapSummary"],a=>{const o=a.tabWrapSummary||{};let r=null;for(const u of m)if(o.categoryTotals?.[u]!==void 0){r=u;break}const c=r?Math.floor((o.categoryTotals[r]||0)/60):0;let n=[];l&&Array.isArray(o[l])?n=o[l]:r&&Array.isArray(o.topCategoryStreaks?.[r])&&(n=o.topCategoryStreaks[r]),$({totalMinutes:c,streakArr:n})})},[]);const A=Array.isArray(e.streakArr)?e.streakArr.map(a=>a.minutes):[],O=Array.isArray(e.streakArr)?e.streakArr.map(a=>a.date?new Date(a.date).toLocaleString("en-US",{month:"short",day:"numeric"}):""):[],R=Array.isArray(e.streakArr)&&e.streakArr.length?`${new Date(e.streakArr[0].date).toLocaleString("en-US",{month:"short",day:"numeric"})} - ${new Date(e.streakArr[e.streakArr.length-1].date).toLocaleString("en-US",{month:"short",day:"numeric"})}`:"",[j,M]=i.useState(0);i.useEffect(()=>{let a,o=1200;function r(c){a||(a=c);const n=Math.min((c-a)/o,1);M(n),n<1?requestAnimationFrame(r):M(1)}return requestAnimationFrame(r),()=>M(0)},[e.totalMinutes,A.length,A.join(",")]);const f=Math.floor(j*e.totalMinutes);let H=Math.floor(f/60),v="HOURS",C=H;return f<1?(v="SECONDS",C=Math.floor(e.totalMinutes*60*j)):f<60&&(v="MINUTES",C=f),{quippySummary:b,isStreaming:w,shownValue:C,unit:v,streakDays:A,streakDates:O,timePeriodLabel:R,progress:j}}const I=({hours:m,unit:p,label:S,focusColor:l,iconColor:d="#4ade80"})=>s.jsxs("div",{className:"flex flex-col items-center justify-center p-8 bg-white/5 rounded-2xl border border-white/10 shadow-xl w-full max-w-lg mx-auto",children:[s.jsx("div",{className:"text-white mb-4 p-2 rounded-full",style:{backgroundColor:d+"33"},children:s.jsx(D,{className:"w-8 h-8",style:{color:d}})}),s.jsx("p",{className:"text-6xl sm:text-7xl font-extrabold",style:{color:l},children:m}),s.jsx("p",{className:"text-sm sm:text-base font-semibold text-gray-400 uppercase tracking-widest mt-2",children:p}),s.jsx("p",{className:"text-2xl sm:text-3xl font-extrabold text-white mt-4 text-center",children:S})]}),Q=({streakDays:m,timePeriodLabel:p,streakDates:S,progress:l,barColor:d="bg-purple-500",hoverColor:N="hover:bg-purple-400",glowColor:T="rgba(168, 85, 247, 0.8)",title:E="TOP FOCUS STREAK"})=>{const h=Math.max(...m,1),b=m.map(t=>h?t/h:0).map(t=>t*(typeof l=="number"?l:1));return s.jsxs("div",{className:"flex flex-col items-center w-full mt-10",children:[s.jsx("h3",{className:"text-xl font-bold text-white mb-6 uppercase tracking-wider",children:E}),s.jsxs("div",{className:"flex items-end space-x-2 w-full max-w-sm px-4",children:[b.map((t,w)=>s.jsx("div",{className:`flex-1 rounded-t-lg ${d} ${N} transition-all duration-300 cursor-pointer`,style:{height:`${t*100}px`,minHeight:"4px",boxShadow:`0 0 10px ${t>.8?T:"transparent"}`,transition:"height 0.3s cubic-bezier(0.4,0,0.2,1)"}},w)),s.jsx(F,{className:"w-8 h-8 text-yellow-400 ml-4 animate-pulse"})]}),s.jsx("p",{className:"text-sm text-gray-400 mt-4 font-semibold tracking-wide",children:p})]})};export{Q as S,I as T,q as u};
