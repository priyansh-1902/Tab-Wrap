import{j as e,c as T,r as n}from"./client-BCr4-QWM.js";/* empty css                       */import{B as E}from"./Background-lBRQ3jij.js";function B({children:t,colorScheme:i}){const f=i?.topGrad||i?.gradient||"linear-gradient(90deg, #ff2dbe 0%, #a259ff 100%)",b=i?.botGrad||i?.gradient||"linear-gradient(120deg, #ff2dbe 0%, #a259ff 100%)",p=i?.background||"#0b0b0b";return e.jsxs("div",{className:"frame",style:{"--topGrad":f,"--botGrad":b,background:p},children:[e.jsx("div",{className:"band band--top"}),e.jsx("div",{className:"band band--bottom"}),e.jsx("div",{className:"frame__content",children:t})]})}const S=[{gradient:"linear-gradient(90deg, #ff2dbe 0%, #a259ff 100%)",bar:"linear-gradient(90deg, #ff2dbe 0%, #a259ff 100%)",accent:"#a259ff",background:"#0b0b0b"},{gradient:"linear-gradient(90deg, #39ff14 0%, #00ffa2 100%)",bar:"linear-gradient(90deg, #39ff14 0%, #00ffa2 100%)",accent:"#39ff14",background:"#0b0b0b"}];function W(){return S[Math.floor(Math.random()*S.length)]}function P(){const[t,i]=n.useState(null),[f,b]=n.useState({}),[p,j]=n.useState([]),[v,N]=n.useState([]),[c]=n.useState(W()),[h,g]=n.useState(""),[w,u]=n.useState(!1),M=n.useRef("");if(console.log("Color Scheme:",c),n.useEffect(()=>{chrome.storage.local.get(["tabWrapSummary","profile"],async a=>{i(a.tabWrapSummary||null);const r=(a.profile?.categories||[]).map(s=>typeof s=="string"?{text:s,emoji:""}:s),l={};r.forEach(s=>{l[s.text]=s.emoji||""}),b(l)})},[]),n.useEffect(()=>{if(!t||!t.categoryPercents)return;const a=800;let r;return window.LanguageModel&&t?(g(""),u(!1),r=setTimeout(async()=>{u(!0);const l=`User description: ${t.profile?.description||""}
Category totals (seconds): ${JSON.stringify(t.categoryTotals)}
Total time spent: ${t.totalMinutes} minutes.

Write a short, witty summary about this user's browsing habits based on their self-description and category totals. Write as if you're talking to the user, not describing them. Make it fun and personalized. STRICTLY KEEP IT UNDER 20 WORDS AND NO EMOJIS.`;try{const s=await window.LanguageModel.create();let o="";for await(const d of s.promptStreaming(l))o+=d,M.current=o,g(o);u(!1),s.destroy()}catch{g("Gemini Nano could not generate a summary."),u(!1)}},a)):t?.quippySummary&&g(t.quippySummary),()=>clearTimeout(r)},[t]),n.useEffect(()=>{if(!t||!t.categoryPercents)return;j(Array(t.categoryPercents.length).fill(0)),N(Array(t.categoryPercents.length).fill(0));const a=800,r=30;t.categoryPercents.forEach((l,s)=>{let o=0;const d=l.pct,k=setInterval(()=>{o++,j(y=>{const m=[...y];return m[s]=Math.min(d,d*o/r),m}),N(y=>{const m=[...y];return m[s]=Math.min(d,d*o/r),m}),o>=r&&clearInterval(k)},a/r)})},[t]),!t)return e.jsx("div",{className:"bg-black text-white min-h-screen p-10 text-center",children:"No stats available. Please run Tab Wrap from the options page."});const x=t.categoryPercents||[];return console.log("Sorted Categories:",x),e.jsxs(e.Fragment,{children:[e.jsx(E,{}),e.jsxs(B,{colorScheme:c,children:[e.jsx("div",{className:"text-lg font-semibold tracking-widest mb-2 opacity-85",children:"TAB WRAP - OCTOBER"}),e.jsx("div",{className:"text-4xl font-bold mb-3",children:"Your Browsing Stats"}),e.jsx("div",{className:"text-xl mb-2 opacity-80",children:"Total Minutes Spent Browsing"}),e.jsx("div",{className:"text-7xl font-extrabold mb-4 tracking-widest",children:t.totalMinutes>0?t.totalMinutes.toLocaleString():`${t.totalSeconds} sec`}),e.jsxs("div",{className:"text-lg mb-2",children:["You opened a ",t.totalTabs>1e3?"massive":"mere"," ",e.jsxs("span",{style:{color:"#ffe082",fontWeight:700},children:[t.totalTabs.toLocaleString()," new tabs"]})," this month!"]}),h&&e.jsx("div",{className:"text-base mb-4",style:{color:c.accent,fontWeight:500,opacity:.92},children:w?e.jsxs("span",{children:[h,e.jsx("span",{className:"animate-pulse",children:"|"})]}):h}),e.jsxs("div",{className:"stats-container",children:[e.jsx("div",{className:"stats-title",children:"Activity Breakdown (By Time)"}),e.jsx("div",{className:"stats-breakdown",style:{borderBottom:`2px solid ${c.accent}`}}),e.jsx("div",{className:"flex flex-col items-center w-full",style:{maxWidth:480},children:x.slice(0,5).map((a,r)=>e.jsxs("div",{className:"stats-category",children:[e.jsxs("div",{className:"stats-category-header",children:[e.jsxs("span",{className:"flex items-center text-white font-bold",children:[f[a.cat]&&e.jsx("span",{className:"stats-category-emoji",children:f[a.cat]}),a.cat]}),e.jsxs("span",{className:"text-white font-bold",children:[(v[r]||0).toFixed(1),"%"]})]}),e.jsx("div",{className:"stats-bar-bg",children:e.jsx("div",{className:"stats-bar",style:{background:c.bar,width:`${p[r]||0}%`,transition:"width 0.2s"}})})]},a.cat))}),x.slice(0,5).some(a=>a.cat==="Social Media / Messaging"||a.cat==="Social Media")&&e.jsx("button",{className:"stats-social-btn",style:{background:c.gradient,boxShadow:"0 2px 8px rgba(162,89,255,0.12)"},onClick:()=>window.location.href="socialmedia.html",children:"Wanna see how much time you spent on social media?"})]})]})]})}const R=document.getElementById("root");T.createRoot(R).render(e.jsx(P,{}));
