import{r as y,j as e}from"./client-BCr4-QWM.js";import{c,C as R}from"./clock-plcJn3eu.js";/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],q=c("briefcase",U);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],O=c("circle-question-mark",I);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["path",{d:"M20.2 6 3 11l-.9-2.4c-.3-1.1.3-2.2 1.3-2.5l13.5-4c1.1-.3 2.2.3 2.5 1.3Z",key:"1tn4o7"}],["path",{d:"m6.2 5.3 3.1 3.9",key:"iuk76l"}],["path",{d:"m12.4 3.4 3.1 4",key:"6hsd6n"}],["path",{d:"M3 11h18v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2Z",key:"ltgou9"}]],V=c("clapperboard",D);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],F=c("dollar-sign",B);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]],K=c("handshake",G);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}],["path",{d:"M3.22 13H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"auskq0"}]],Y=c("heart-pulse",Q);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],J=c("message-circle",Z);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-4 0v-9a2 2 0 0 1 2-2h2",key:"39pd36"}],["rect",{width:"8",height:"4",x:"10",y:"6",rx:"1",key:"aywv1n"}]],ee=c("newspaper",X);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],ae=c("palette",te);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]],se=c("plane",re);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],le=c("shopping-cart",oe);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],ie=c("sun",ne);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],de=c("trophy",ce);function me({categoryNames:s=[],label:m="",focusColor:k="#4ade80",streakKey:h="",streakTitle:g="TOP FOCUS STREAK",streakBarColor:A="bg-purple-500",streakHoverColor:_="hover:bg-purple-400",streakGlowColor:L="rgba(168, 85, 247, 0.8)",summaryType:w="",quipDefault:S="Keep up the grind!"}){const[v,o]=y.useState(""),[p,$]=y.useState(!1),T=y.useRef("");y.useEffect(()=>{async function r(){if(!window.LanguageModel){o(S);return}if(await window.LanguageModel.availability()==="unavailable"){o(S);return}const l=await window.LanguageModel.create();chrome.storage.local.get(["tabWrapSummary"],async n=>{const t=n.tabWrapSummary||{};let d=null;for(const u of s)if(t.categorySummaries?.[u]!==void 0){d=u;break}const x=d?t.categorySummaries[d]:"";if(x){const u=x+`
Write a quippy statement about this ${w} summary, as if talking to the user, in less than 50 characters.`;try{$(!0);let W="";for await(const E of l.promptStreaming(u))W+=E,T.current=W,o(W);$(!1),l.destroy()}catch{o(S),$(!1)}}else o(S)})}r()},[]);const[a,z]=y.useState({totalSeconds:0,streakArr:[]});y.useEffect(()=>{chrome.storage.local.get(["tabWrapSummary"],r=>{const i=r.tabWrapSummary||{};let l=null;for(const d of s)if(i.categoryTotals?.[d]!==void 0){l=d;break}const n=l?i.categoryTotals[l]:0;let t=[];h&&Array.isArray(i[h])?t=i[h]:l&&Array.isArray(i.topCategoryStreaks?.[l])&&(t=i.topCategoryStreaks[l]),z({totalSeconds:n,streakArr:t})})},[]);const f=Array.isArray(a.streakArr)?a.streakArr.map(r=>r.seconds!==void 0?r.seconds:r.minutes!==void 0?r.minutes*60:0):[],H=Array.isArray(a.streakArr)?a.streakArr.map(r=>r.date?new Date(r.date).toLocaleString("en-US",{month:"short",day:"numeric"}):""):[],P=Array.isArray(a.streakArr)&&a.streakArr.length?`${new Date(a.streakArr[0].date).toLocaleString("en-US",{month:"short",day:"numeric"})} - ${new Date(a.streakArr[a.streakArr.length-1].date).toLocaleString("en-US",{month:"short",day:"numeric"})}`:"",[j,N]=y.useState(0);y.useEffect(()=>{let r,i=1200;function l(n){r||(r=n);const t=Math.min((n-r)/i,1);N(t),t<1?requestAnimationFrame(l):N(1)}return requestAnimationFrame(l),()=>N(0)},[a.totalSeconds,f.length,f.join(",")]);const b=Math.floor(j*a.totalSeconds);let C="HOURS",M=Math.floor(b/3600);return b<60?(C="SECONDS",M=b):b<3600&&(C="MINUTES",M=Math.floor(b/60)),{quippySummary:v,isStreaming:p,shownValue:M,unit:C,streakDays:f,streakDates:H,timePeriodLabel:P,progress:j}}function he({hours:s,unit:m,label:k,focusColor:h,iconColor:g="#4ade80"}){return e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 bg-white/5 rounded-2xl border border-white/10 shadow-xl w-full max-w-lg mx-auto",children:[e.jsx("div",{className:"text-white mb-4 p-2 rounded-full",style:{backgroundColor:g+"33"},children:e.jsx(R,{className:"w-8 h-8",style:{color:g}})}),e.jsx("p",{className:"text-6xl sm:text-7xl font-extrabold",style:{color:h},children:s}),e.jsx("p",{className:"text-sm sm:text-base font-semibold text-gray-400 uppercase tracking-widest mt-2",children:m}),e.jsx("p",{className:"text-2xl sm:text-3xl font-extrabold text-white mt-4 text-center",children:k})]})}function pe({streakDays:s,timePeriodLabel:m,streakDates:k,progress:h,barColor:g="bg-purple-500",hoverColor:A="hover:bg-purple-400",glowColor:_="rgba(168, 85, 247, 0.8)",title:L="TOP FOCUS STREAK"}){const w=Math.max(...s,1),v=s.map(o=>w?o/w:0).map(o=>o*(typeof h=="number"?h:1));return e.jsxs("div",{className:"flex flex-col items-center w-full mt-10",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-6 uppercase tracking-wider",children:L}),e.jsxs("div",{className:"flex items-end space-x-2 w-full max-w-sm px-4",children:[v.map((o,p)=>e.jsx("div",{className:`flex-1 rounded-t-lg ${g} ${A} transition-all duration-300 cursor-pointer`,style:{height:`${o*100}px`,minHeight:"4px",boxShadow:`0 0 10px ${o>.8?_:"transparent"}`,transition:"height 0.3s cubic-bezier(0.4,0,0.2,1)"}},p)),e.jsx(de,{className:"w-8 h-8 text-yellow-400 ml-4 animate-pulse"})]}),e.jsx("p",{className:"text-sm text-gray-400 mt-4 font-semibold tracking-wide",children:m})]})}function ye({categoryNames:s=[],label:m="",focusColor:k="#4ade80",streakTitle:h="TOP CATEGORY STREAK",streakBarColor:g="bg-purple-500",streakHoverColor:A="hover:bg-purple-400",streakGlowColor:_="rgba(168, 85, 247, 0.8)",summaryType:L="",quipDefault:w="Keep going!",pageTitle:S="CATEGORY SUMMARY",bgColors:v=["#a78bfa","#fbbf24","#38bdf8"]}){const o={work:q,finance:F,hobbies:ae,spirituality:ie,health:Y,social:J,community:K,entertainment:V,shopping:le,news:ee,travel:se,default:O},[p,$]=y.useState([]);y.useEffect(()=>{chrome.storage.local.get(["tabWrapSummary"],n=>{const t=n.tabWrapSummary||{},d=Array.isArray(t.categoryPercents)?t.categoryPercents.slice(0,5):[];$(d.map(x=>x.cat))})},[s]);let T=s&&s.length?s[0]:m;const a=p.findIndex(n=>n===T),z=a>=0?(a+1)%p.length:0,f=p[z]||"";let H="";f.includes("/")?H=f.split("/")[0].replace(/\s+/g,"").toLowerCase():H=f.split(" ")[0].toLowerCase();const P=`${H}.html`,{quippySummary:j,isStreaming:N,shownValue:b,unit:C,streakDays:M,streakDates:r,timePeriodLabel:i,progress:l}=me({categoryNames:s,label:m,focusColor:k,streakKey:"",streakTitle:h,streakBarColor:g,streakHoverColor:A,streakGlowColor:_,summaryType:L,quipDefault:w});return console.log("Rendering CategoryPage for",s),console.log({quippySummary:j,isStreaming:N,shownValue:b,unit:C,streakDays:M,streakDates:r,timePeriodLabel:i,progress:l}),e.jsxs("div",{className:"min-h-screen p-4 sm:p-8 flex items-center justify-center bg-gray-900 font-sans",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden -z-10",children:[e.jsx("div",{style:{backgroundColor:v[0]},className:"absolute top-10 left-1/4 w-96 h-96 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob"}),e.jsx("div",{style:{backgroundColor:v[1]},className:"absolute top-1/2 right-0 w-80 h-80 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-2000"}),e.jsx("div",{style:{backgroundColor:v[2]},className:"absolute bottom-0 left-0 w-72 h-72 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-4000"})]}),e.jsxs("div",{className:"w-full max-w-xl p-6 md:p-8 rounded-3xl backdrop-filter backdrop-blur-xl bg-white/5 border border-white/10 shadow-2xl relative space-y-12",children:[e.jsxs("div",{className:"flex flex-col items-center mb-2",children:[(()=>{console.log("Rendering icon for category:",m,s);const n=o[m]||o.default;return e.jsx(n,{className:"w-14 h-14 mb-2",style:{color:k},"aria-label":m+" icon"})})(),e.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold text-center text-white uppercase tracking-widest drop-shadow-lg",children:S})]}),e.jsx(he,{hours:b,unit:C,label:m,focusColor:k}),e.jsx("div",{className:"flex flex-col items-center justify-center p-6 bg-white/10 rounded-2xl border border-white/10 shadow-lg w-full max-w-lg mx-auto my-4",children:e.jsx("p",{className:"text-base sm:text-lg font-semibold text-white text-center",children:N?e.jsxs("span",{children:[j,e.jsx("span",{className:"animate-pulse",children:"|"})]}):j||w})}),e.jsx(pe,{streakDays:M,timePeriodLabel:i,streakDates:r,progress:l,barColor:g,hoverColor:A,glowColor:_,title:h}),p.length>0&&(()=>{const n=a-1;let t=n>=0?p[n]:null,d="",x="";a===0?x="tabwrapstats.html":t&&(t.includes("/")?d=t.split("/")[0].replace(/\s+/g,"").toLowerCase():d=t.split(" ")[0].toLowerCase(),x=`${d}.html`);const u="w-56 h-12 mx-2 rounded-xl font-semibold text-white text-base bg-[#23243a] shadow-md hover:bg-[#2d2e4a] transition-all flex items-center justify-center tracking-wide";return a===0||a===p.length-1?a===0?e.jsxs("div",{className:"flex justify-center items-center mt-8 gap-6",children:[e.jsx("button",{className:u,style:{minWidth:"14rem",maxWidth:"14rem",height:"3rem",boxShadow:"0 2px 12px rgba(56,189,248,0.10)",border:"1px solid #2d2e4a"},onClick:()=>window.location.href=x,children:"Back to Stats"}),e.jsxs("button",{className:u,style:{minWidth:"14rem",maxWidth:"14rem",height:"3rem",boxShadow:"0 2px 12px rgba(56,189,248,0.10)",border:"1px solid #2d2e4a"},onClick:()=>window.location.href=P,children:["Go to next top category: ",f]})]}):e.jsx("div",{className:"flex justify-center mt-8",children:e.jsxs("button",{className:u,style:{minWidth:"14rem",maxWidth:"14rem",height:"3rem",boxShadow:"0 2px 12px rgba(56,189,248,0.10)",border:"1px solid #2d2e4a"},onClick:()=>window.location.href=x,children:["Back to previous category",t?": "+t:""]})}):e.jsxs("div",{className:"flex justify-center items-center mt-8 gap-6",children:[e.jsxs("button",{className:u,style:{minWidth:"14rem",maxWidth:"14rem",height:"3rem",boxShadow:"0 2px 12px rgba(56,189,248,0.10)",border:"1px solid #2d2e4a"},onClick:()=>window.location.href=x,children:["Back to previous category: ",t]}),e.jsxs("button",{className:u,style:{minWidth:"14rem",maxWidth:"14rem",height:"3rem",boxShadow:"0 2px 12px rgba(56,189,248,0.10)",border:"1px solid #2d2e4a"},onClick:()=>window.location.href=P,children:["Go to next top category: ",f]})]})})()]}),e.jsx("style",{children:`
        @keyframes blob {
          0% {
            transform: translate(0px, 0px) scale(1);
          }
          33% {
            transform: translate(30px, -50px) scale(1.1);
          }
          66% {
            transform: translate(-20px, 20px) scale(0.9);
          }
          100% {
            transform: translate(0px, 0px) scale(1);
          }
        }
        .animate-blob {
          animation: blob 7s infinite cubic-bezier(0.6, -0.28, 0.735, 0.045);
        }
        .animation-delay-2000 {
          animation-delay: 2s;
        }
        .animation-delay-4000 {
          animation-delay: 4s;
        }
        @keyframes pulse {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.5; }
        }
        .animate-pulse {
            animation: pulse 1s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
      `})]})}export{ye as C};
